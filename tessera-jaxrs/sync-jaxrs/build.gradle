plugins {
  id "java-library"
}

dependencies {

  implementation project(":tessera-jaxrs:common-jaxrs")
  implementation project(":security")
  implementation project(":shared")
  implementation project(":config")
  implementation project(":enclave:enclave-api")
  implementation project(":encryption:encryption-api")
  implementation project(":tessera-jaxrs:jaxrs-client")
  implementation project(':tessera-jaxrs:partyinfo-model')
  api "io.swagger.core.v3:swagger-annotations-jakarta"
  implementation project(":tessera-core")
  implementation project(":tessera-partyinfo")
  implementation project(":tessera-data")
  implementation project(":tessera-context")
  implementation project(":tessera-recover")

  implementation "org.apache.commons:commons-lang3"

  implementation "jakarta.validation:jakarta.validation-api"

  implementation "jakarta.ws.rs:jakarta.ws.rs-api"
  implementation "jakarta.xml.bind:jakarta.xml.bind-api"

  api "jakarta.inject:jakarta.inject-api"

  compileOnly project(':tessera-jaxrs:openapi:common')

  constraints {
    implementation("com.fasterxml.jackson.core:jackson-databind:$jacksonDatabindVersion") {
      because 'databind less than 2.13.2.2 has a bug'
    }
  }
}

jar {
  manifest {
    attributes(
      "Implementation-Title": project.name,
      "Implementation-Version": project.version,
      "Specification-Version": String.valueOf(project.version).replaceAll("-SNAPSHOT","")
      )
  }
}

def generatedResources = "${project.buildDir}/generated-resources/openapi"

sourceSets.main.output.dir(generatedResources)
